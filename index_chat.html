<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìç Location ChatGPT-4 - Find People Nearby</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    /* Animated Background Particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      background: rgba(255,255,255,0.5);
      border-radius: 50%;
      animation: float 6s infinite linear;
    }

    /* Main Messenger Container */
    .msger {
      width: 95%;
      max-width: 500px;
      height: 85vh;
      max-height: 700px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      box-shadow: 
        0 25px 50px rgba(0,0,0,0.25),
        0 0 0 1px rgba(255,255,255,0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
      z-index: 10;
      animation: slideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* Header */
    .msger-header {
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      color: white;
      padding: 20px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 20;
      box-shadow: 0 2px 20px rgba(79, 70, 229, 0.3);
    }

    .msger-header-title {
      font-size: 18px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .msger-header-options {
      cursor: pointer;
      padding: 8px;
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .msger-header-options:hover {
      background: rgba(255,255,255,0.2);
      transform: scale(1.1);
    }

    /* Chat Messages Area */
    .msger-chat {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
      scrollbar-width: thin;
      scrollbar-color: rgba(79,70,229,0.3) transparent;
    }

    .msger-chat::-webkit-scrollbar {
      width: 4px;
    }

    .msger-chat::-webkit-scrollbar-track {
      background: transparent;
    }

    .msger-chat::-webkit-scrollbar-thumb {
      background: rgba(79,70,229,0.3);
      border-radius: 2px;
    }

    /* Message */
    .msg {
      display: flex;
      align-items: flex-end;
      margin-bottom: 24px;
      animation: messageSlide 0.4s ease-out;
    }

    .msg-img {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      margin-right: 16px;
      background-size: cover;
      background-position: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      flex-shrink: 0;
    }

    .msg-bubble {
      max-width: 75%;
      padding: 16px 20px;
      border-radius: 20px;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      position: relative;
    }

    .left-msg .msg-bubble {
      border-bottom-left-radius: 6px;
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    }

    .msg-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .msg-info-name {
      font-weight: 600;
      color: #4f46e5;
      font-size: 14px;
    }

    .msg-info-time {
      font-size: 12px;
      color: #64748b;
      font-weight: 500;
    }

    .msg-text {
      font-size: 15px;
      line-height: 1.5;
      color: #334155;
      word-wrap: break-word;
    }

    /* Typing Indicator */
    .typing {
      display: flex;
      align-items: flex-end;
      margin-bottom: 24px;
    }

    .typing-bubble {
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
      border-radius: 20px 20px 6px 20px;
      padding: 12px 16px 8px;
      max-width: 75%;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #64748b;
      animation: typing 1.4s infinite ease-in-out;
    }

    .dot:nth-child(2) { animation-delay: 0.2s; }
    .dot:nth-child(3) { animation-delay: 0.4s; }

    /* Input Area */
    .msger-inputarea {
      display: flex;
      padding: 20px 24px;
      gap: 12px;
      background: white;
      border-top: 1px solid rgba(0,0,0,0.05);
      box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
    }

    .msger-input {
      flex: 1;
      border: 2px solid #e2e8f0;
      border-radius: 24px;
      padding: 14px 20px;
      font-size: 15px;
      outline: none;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .msger-input:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 4px rgba(79,70,229,0.1);
      transform: translateY(-1px);
    }

    .msger-input::placeholder {
      color: #94a3b8;
    }

    .msger-send-btn {
      width: 52px;
      height: 52px;
      border: none;
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      border-radius: 50%;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 15px rgba(79,70,229,0.4);
    }

    .msger-send-btn:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 25px rgba(79,70,229,0.5);
    }

    .msger-send-btn:active {
      transform: translateY(0) scale(0.98);
    }

    /* Location Status */
    .location-status {
      position: absolute;
      top: 80px;
      right: 20px;
      background: rgba(16,185,129,0.95);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(16,185,129,0.4);
      animation: pulse 2s infinite;
      z-index: 30;
    }

    .location-status.error {
      background: rgba(239,68,68,0.95);
      box-shadow: 0 4px 15px rgba(239,68,68,0.4);
    }

    /* Animations */
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.4;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 4px 15px rgba(16,185,129,0.4);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 4px 25px rgba(16,185,129,0.6);
        transform: scale(1.05);
      }
    }

    /* Responsive Design */
    @media (max-width: 480px) {
      .msger {
        width: 98%;
        height: 95vh;
        border-radius: 20px;
        margin: 1vh;
      }
      
      .msger-header {
        padding: 16px 20px;
      }
      
      .msger-inputarea {
        padding: 16px 20px;
        position: sticky;
        bottom: 0;
        background: white;
      }
    }

    @media (max-height: 600px) {
      .msger {
        height: 98vh;
      }
      
      .msger-chat {
        padding: 12px;
      }
    }
  </style>
</head>

<body>
  <!-- Animated Particles -->
  <div class="particles" id="particles"></div>
  
  <!-- Location Status -->
  <div class="location-status" id="locationStatus" style="display: none;">
    <i class="fas fa-map-marker-alt"></i> GPS Active
  </div>

  <section class="msger">
    <header class="msger-header">
      <div class="msger-header-title">
        <i class="fas fa-map-marker-alt"></i>
        Location ChatGPT-4
      </div>
      <div class="msger-header-options" title="Settings">
        <i class="fas fa-cog"></i>
      </div>
    </header>

    <main class="msger-chat" id="chat">
      <div class="msg left-msg">
        <div class="msg-img" style="background-image: url('https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?w=150&h=150&fit=crop&crop=center')"></div>
        <div class="msg-bubble">
          <div class="msg-info">
            <div class="msg-info-name">ü§ñ LocationGPT</div>
            <div class="msg-info-time" id="currentTime"></div>
          </div>
          <div class="msg-text">
            üëã Hi! Welcome to <strong>Location ChatGPT-4</strong><br>
            üìç <strong>Enable location access</strong> to find people nearby<br>
            üí¨ Ask me anything about your surroundings!
          </div>
        </div>
      </div>

      <!-- Typing Indicator (Hidden by default) -->
      <div class="typing" id="typingIndicator" style="display: none;">
        <div class="msg-img" style="background: linear-gradient(135deg, #4f46e5, #7c3aed); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
          ü§ñ
        </div>
        <div class="typing-bubble">
          <div class="typing-dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
        </div>
      </div>
    </main>

    <form class="msger-inputarea" id="messageForm">
      <input 
        type="text" 
        class="msger-input" 
        id="messageInput"
        placeholder="Ask about nearby people, locations, or services..."
        autocomplete="off"
      >
      <button type="submit" class="msger-send-btn" id="sendBtn">
        <i class="fas fa-paper-plane"></i>
      </button>
    </form>
  </section>

  <script>
    // Global variables
    let userLocation = null;
    let isTyping = false;

    // Initialize app
    document.addEventListener('DOMContentLoaded', function() {
      updateTime();
      createParticles();
      setupEventListeners();
      gpsLocation();
    });

    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.width = Math.random() * 4 + 2 + 'px';
        particle.style.height = particle.style.width;
        particle.style.animationDuration = Math.random() * 6 + 4 + 's';
        particle.style.animationDelay = Math.random() * -6 + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // GPS Location
    function gpsLocation() {
      const status = document.getElementById('locationStatus');
      
      if (!navigator.geolocation) {
        showStatus('GPS not supported', 'error');
        return;
      }

      showStatus('Requesting location...', 'loading');
      
      navigator.geolocation.getCurrentPosition(
        function(position) {
          userLocation = {
            lat: position.coords.latitude,
            lng: position.coords.longitude,
            accuracy: position.coords.accuracy
          };
          
          showStatus(`GPS Active ‚Ä¢ ${Math.round(userLocation.accuracy)}m accuracy`, 'success');
          console.log('Location:', userLocation);
        },
        function(error) {
          let message = 'Location access denied';
          switch(error.code) {
            case error.PERMISSION_DENIED:
              message = 'Location access denied';
              break;
            case error.POSITION_UNAVAILABLE:
              message = 'Location unavailable';
              break;
            case error.TIMEOUT:
              message = 'Location timeout';
              break;
          }
          showStatus(message, 'error');
        },
        {
          enableHighAccuracy: true,
          timeout: 10000,
          maximumAge: 60000
        }
      );
    }

    // Show location status
    function showStatus(message, type = 'info') {
      const status = document.getElementById('locationStatus');
      status.textContent = message;
      status.className = `location-status ${type}`;
      status.style.display = 'block';
      
      if (type !== 'error') {
        setTimeout(() => {
          status.style.display = 'none';
        }, 4000);
      }
    }

    // Update current time
    function updateTime() {
      const now = new Date();
      const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      document.getElementById('currentTime').textContent = timeString;
    }
    setInterval(updateTime, 60000);

    // Setup event listeners
    function setupEventListeners() {
      const form = document.getElementById('messageForm');
      const input = document.getElementById('messageInput');

      form.addEventListener('submit', sendMessage);
      input.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage(e);
        }
      });

      // Auto-resize input
      input.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
      });
    }

    // Send message
    async function sendMessage(e) {
      e.preventDefault();
      
      const input = document.getElementById('messageInput');
      const message = input.value.trim();
      
      if (!message) return;

      // Add user message
      addMessage(message, 'right', 'You');
      input.value = '';
      
      // Show typing indicator
      showTyping(true);
      
      // Simulate AI response
      setTimeout(() => {
        showTyping(false);
        const responses = getAIResponse(message);
        setTimeout(() => addMessage(responses, 'left', 'LocationGPT'), 800);
      }, 1500);
    }

    // Add message to chat
    function addMessage(text, side, sender) {
      const chat = document.getElementById('chat');
      const msg = document.createElement('div');
      msg.className = `msg ${side}-msg`;
      
      const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      const imgUrl = side === 'left' 
        ? 'https://images.unsplash.com/photo-1529665253569-6d01c0eaf7b6?w=150&h=150&fit=crop&crop=center'
        : 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=center';
      
      msg.innerHTML = `
        <div class="msg-img" style="background-image: url('${imgUrl}')"></div>
        <div class="msg-bubble">
          <div class="msg-info">
            <div class="msg-info-name">${sender}</div>
            <div class="msg-info-time">${time}</div>
          </div>
          <div class="msg-text">${text}</div>
        </div>
      `;
      
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    // Show/hide typing indicator
    function showTyping(show) {
      const typing = document.getElementById('typingIndicator');
      isTyping = show;
      typing.style.display = show ? 'flex' : 'none';
      
      if (show) {
        document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
      }
    }

    // Get AI response
    function getAIResponse(message) {
      const lowerMsg = message.toLowerCase();
      
      if (userLocation) {
        if (lowerMsg.includes('nearby') || lowerMsg.includes('people') || lowerMsg.includes('find')) {
          return `üìç Found ${Math.floor(Math.random() * 50) + 10} people within ${Math.round(userLocation.accuracy)}m:<br>
          ‚Ä¢ 3 friends nearby<br>
          ‚Ä¢ 12 locals active<br>
          ‚Ä¢ 5 new connections<br><br>
          üí° Want me to show you the closest person?`;
        }
        
        if (lowerMsg.includes('location') || lowerMsg.includes('where')) {
          return `üìç Your current location:<br>
          <strong>Lat:</strong> ${userLocation.lat.toFixed(4)}¬∞<br>
          <strong>Lng:</strong> ${userLocation.lng.toFixed(4)}¬∞<br>
          <strong>Accuracy:</strong> ${Math.round(userLocation.accuracy)}m<br><br>
          üîç Ready to find people nearby!`;
        }
      }
      
      const responses = [
        "üìç Please enable location access to find nearby people!",
        "üîç I can help you find people nearby once GPS is active",
        "üåç Share your location to discover people around you",
        "üí¨ LocationGPT-4 is ready! Enable GPS to start finding people"
      ];
      
      return responses[Math.floor(Math.random() * responses.length)];
    }

    // Service Worker for PWA (Optional)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js');
      });
    }
  </script>
</body>
</html>
